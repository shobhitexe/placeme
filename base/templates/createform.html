{% extends 'base.html' %}
{% load static %}  
{% load crispy_forms_tags %}
{% block content %}

<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous" />
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.3.1/css/all.css" integrity="sha384-mzrmE5qonljUremFsqc01SB46JvROS7bZs3IO2EmfFsd15uHvIt+Y8vEf7N7fWAU" crossorigin="anonymous" />
<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>
<script>
    $(document).ready(function() {
  var buttonAdd = $("#add-button");
  var buttonRemove = $("#remove-button");
  var className = ".dynamic-field-choices";
  var count = 0;
  var field = "";
  var maxFields = 5;

  $('.dynamic-field-choices').hide();

  function totalFields() {
    return $(className).length;
  }

  function addNewField() {
    count = totalFields() + 1;
    field = $("#dynamic-field-1").clone();
    field_type = $("#dynamic-field-type-1").clone();
    field_type_ans = $("#dynamic-field-choices-1").clone();
    field.attr("id", "dynamic-field-" + count);
    field_type.attr("id", "dynamic-field-type-" + count);
    field_type_ans.attr("id", "dynamic-field-choices-" + count);
    field.children("label").text("Field " + count);
    field_type.children("label").text("Field Type " + count);
    field.find("input").val("");
    field_type.find("select").val("Text");
    field_type_ans.find("select").val("");
    $(className + ":last").after($(field),$(field_type),$(field_type_ans));
    $('#dynamic-field-choices-'+count).hide();
  }

  function removeLastField() {
    if (totalFields() > 1) {
    
      $(className + ":last").remove();
      $(".dynamic-field:last").remove();
      $(".dynamic-field-type:last").remove();
    }
  }

  function enableButtonRemove() {
    if (totalFields() === 2) {
      buttonRemove.removeAttr("disabled");
      buttonRemove.addClass("shadow-sm");
    }
  }

  function disableButtonRemove() {
    if (totalFields() === 1) {
      buttonRemove.attr("disabled", "disabled");
      buttonRemove.removeClass("shadow-sm");
    }
  }

  function disableButtonAdd() {
    if (totalFields() === maxFields) {
      buttonAdd.attr("disabled", "disabled");
      buttonAdd.removeClass("shadow-sm");
    }
  }

  function enableButtonAdd() {
    if (totalFields() === (maxFields - 1)) {
      buttonAdd.removeAttr("disabled");
      buttonAdd.addClass("shadow-sm");
    }
  }

  buttonAdd.click(function() {
    addNewField();
    enableButtonRemove();
    disableButtonAdd();
  });

  buttonRemove.click(function() {
    removeLastField();
    disableButtonRemove();
    enableButtonAdd();
  });



 });
 function showOptions(s) {
    num = s.id.charAt(s.id.length - 1)
    var chosen =$(s).find(":selected").val();
    if (chosen==='Choice')
    {
        $('#dynamic-field-choices-'+num).show();
    }
    else
    {
        $('#dynamic-field-choices-'+num).hide();
    }
}
</script>
    <div class="container my-4">
      <p class="h1">Create Form</p>
      <div class="card my-4 shadow" >
        <div class="card-body">
          <form action="" method="post">
            <div class="form-row">
                <div id="dynamic-field-1" class="form-group dynamic-field col-md-4">
                <label for="field" class="font-weight-bold">Field 1</label>
                <input type="text" placeholder="Enter Field Name.." id="field" class="form-control" name="field[]" />
                </div>
                <div onchange=showOptions(this) id="dynamic-field-type-1" class="form-group dynamic-field-type col-md-4">
                    <label for="field_type" class="font-weight-bold">Field Type 1</label>
                    <select class="select form-control" id="type">
                    <option>Text</option>
                    <option>Paragraph</option>
                    <option>Email</option>
                    <option>Choice</option>
                    <option>Integer</option>
                    <option>Decimal</option>
                    <option>Boolean</option>
                    <option>File Upload</option>
                    </select>
                </div>
                <div id="dynamic-field-choices-1" class="form-group dynamic-field-choices col-md-4">
                    <label for="field_type_ans" class="font-weight-bold ms-2 choices">Choices :</label>
                    <select class="choice form-control" id="type">
                    <option>Text</option>
                    </select>
                </div>
            </div>
            <div class="clearfix mt-4">
              <button type="button" id="add-button" class="btn btn-secondary float-left text-uppercase shadow-sm"><i class="fas fa-plus fa-fw"></i> Add</button>
              <button type="button" id="remove-button" class="btn btn-secondary float-left text-uppercase ml-1" disabled="disabled"><i class="fas fa-minus fa-fw"></i> Remove</button>
              <button type="submit" class="btn btn-primary float-right text-uppercase shadow-sm">Submit</button>
            </div>
          </form>
        </div>
      </div>
    </div>

{% endblock content %}